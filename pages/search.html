<div id="search-error" class="alert alert-error hidden">
  <span class="label label-info">FATAL</span><p class="text-error"></p>
</div>

<ul id="search-result" class="hidden">
  <li id="search-FoundData"><span class="name">FoundData: </span><span class="value"></span></li>
  <li id="search-ProcessingTook"><span class="name">ProcessingTook: </span><span class="value"></span></li>
  <li id="search-block"><span class="name">Block: </span><span class="value"></span></li>
  <li id="search-hash"><span class="name">Hash: </span><span class="value"></span></li>
  <li id="search-confirmations"><span class="name">Confirmations: </span><span class="value"></span></li>
  <li id="search-size"><span class="name">Size (bytes): </span><span class="value"></span></li>
  <li id="search-version"><span class="name">Version: </span><span class="value"></span></li>
  <li id="search-merkleroot"><span class="name">Merkleroot: </span><span class="value"></span></li>
  <li id="search-time"><span class="name">Time (unix time): </span><span class="value"></span></li>
  <li id="search-bits"><span class="name">Bits: </span><span class="value"></span></li>
  <li id="search-difficulty"><span class="name">Difficulty: </span><span class="value"></span></li>
  <li id="search-chainwork"><span class="name">Chainwork: </span><span class="value"></span></li>
  <li id="search-previousblockhash"><span class="name">Previous block hash: </span><span class="value"></span></li>
  <li id="search-tx"><span class="name">Transactions: </span><span class="value"></span></li>
</ul>

<script type="text/javascript">
    function show_error(error) {
      $("#search-error").find(".text-error").text(error);
      if($("#search-error").hasClass("hidden"))
        $("#search-error").removeClass("hidden");
      if(!$("#search-result").hasClass("hidden"))
        $("#search-result").addClass("hidden");
    }

    if(!getUrlParamByName('query')) {
      show_error('No data');
    } else

    $.ajax(
    {
      url: "/parsedb?query="+getUrlParamByName('query'),

      success: function(json)
      {
        if(json['FATAL']) {
          show_error(json['FATAL']);
          return
        }

        if(!$("#search-error").hasClass("hidden"))
          $("#search-error").addClass("hidden");
        if($("#search-result").hasClass("hidden"))
          $("#search-result").removeClass("hidden");

        $("#search-FoundData").find(".value").text(json['FoundData']);
        $("#search-ProcessingTook").find(".value").text(json['ProcessingTook']);
        $("#search-block").find(".value").text(json['block']);
        $("#search-hash").find(".value").text(json['hash']);
        $("#search-confirmations").find(".value").text(json['confirmations']);
        $("#search-size").find(".value").text(json['size']);
        $("#search-version").find(".value").text(json['version']);
        $("#search-merkleroot").find(".value").text(json['merkleroot']);
        $("#search-time").find(".value").text(json['time']);
        $("#search-bits").find(".value").text(json['bits']);
        $("#search-difficulty").find(".value").text(json['difficulty']);
        $("#search-chainwork").find(".value").text(json['chainwork']);
        $("#search-previousblockhash").find(".value").text(json['previousblockhash']);
        $("#search-tx").find(".value").text(json['tx']);
      },
      error: function(xhr, ajaxOptions, thrownError) {
        show_error(thrownError);
      }
    });
</script>
